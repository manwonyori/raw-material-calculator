<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>원재료 계산 - 만원요리 최씨남매</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>🧮 원재료 계산기 v2</h1>
            <p class="brand">만원요리 최씨남매</p>
        </header>

        <!-- 저장된 레시피 불러오기 섹션 -->
        <div class="saved-recipes-section">
            <h2>📚 저장된 레시피</h2>
            <div class="recipe-categories">
                <div class="category-tabs">
                    <button class="tab-btn active" onclick="showCategory('all')">전체</button>
                    <button class="tab-btn" onclick="showCategory('소스류')">소스류</button>
                    <button class="tab-btn" onclick="showCategory('반찬류')">반찬류</button>
                    <button class="tab-btn" onclick="showCategory('국찌개류')">국찌개류</button>
                </div>
                <div id="recipeList" class="recipe-list">
                    <!-- 레시피 목록이 여기에 표시됩니다 -->
                </div>
            </div>
        </div>

        <div class="input-section">
            <h2>📝 레시피 정보 입력</h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label>제품명:</label>
                    <input type="text" id="recipeName" placeholder="예: 최씨네토마토만능소스">
                </div>
                <div class="form-group">
                    <label>브랜드 (선택):</label>
                    <input type="text" id="brand" placeholder="예: 만원요리">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>카테고리:</label>
                    <select id="category">
                        <option value="소스류">소스류</option>
                        <option value="반찬류">반찬류</option>
                        <option value="국찌개류">국찌개류</option>
                        <option value="기타">기타</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>총 생산량(kg):</label>
                    <input type="number" id="totalWeight" value="244" step="0.1">
                </div>
            </div>

            <div class="form-group">
                <label>로스율 입력 방식:</label>
                <select id="lossRateType" onchange="toggleLossInput()">
                    <option value="percentage">로스율(%) 직접 입력</option>
                    <option value="production">실제 생산량 입력</option>
                </select>
            </div>

            <div id="lossPercentageInput" class="form-group">
                <label>로스율(%):</label>
                <input type="number" id="lossRate" value="22" step="0.1">
            </div>

            <div id="actualProductionInput" class="form-group" style="display:none;">
                <label>실제 생산량(kg):</label>
                <input type="number" id="actualProduction" value="190.32" step="0.1">
            </div>

            <h3>🥫 재료 입력 (kg/g 단위만)</h3>
            <div id="materialsContainer">
                <!-- 재료들이 여기에 추가됩니다 -->
            </div>
            
            <button onclick="addMaterial()" class="btn-add">➕ 재료 추가</button>
        </div>

        <div class="action-buttons">
            <button onclick="calculate()" class="btn-calculate">계산하기</button>
            <button onclick="saveRecipe()" class="btn-save" id="saveBtn" disabled>💾 레시피 저장</button>
            <button onclick="downloadCSV()" class="btn-download" id="downloadBtn" disabled>📥 CSV 다운로드</button>
        </div>

        <div id="results" class="results-section" style="display:none;">
            <h2>📊 계산 결과</h2>
            <div id="resultContent"></div>
            
            <!-- 원가 변동 추이 -->
            <div id="costTrend" class="cost-trend-section" style="display:none;">
                <h3>📈 원가 변동 추이</h3>
                <div id="trendChart"></div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script_v2.js') }}"></script>
</body>
</html>